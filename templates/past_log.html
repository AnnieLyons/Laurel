{% extends 'base.html' %}

{% block title %}Past Logs{% endblock %}

{% block content %}

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="/homepage">Laurel</a> 
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="/new_log_entry">Make Log <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="/view_past_logs">Past Logs <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="/stats">Bird Stats <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Other
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="/resources">Resources</a>
          <a class="dropdown-item" href="/account">Account</a>
          <a class="dropdown-item" href="/contact">Contact</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="/logout">Logout</a>
        </div>
      </li>
    </ul>
   
  </div>
</nav>


<h1>Here's your peek into the past.</h1>

<div>  Date: {{ log.date }} / Time: {{ log.time }} / Location: {{ log.location }} / Weather: {{ log.weather }} / Habitat: {{ log.habitat }} / Equipment: {{ log.equipment }} / Notes: {{ log.notes }} </div>

<div>Birds:
    {% for bird in log.birds %}
        <div>{{ bird.species }}</div>
    {% endfor %}
</div>

<div id="map" style="width: 250px; height: 250px;"></div>

<script type="text/javascript">
    const loc = {lat: {{ log.latitude }}, lng: {{ log.longitude }} };

    // Initialize and add the map
    function initMap() {

        const map = new google.maps.Map($('#map')[0], {
          zoom: 11,
          center: loc
        });

        const marker = new google.maps.Marker({
            position: loc,
            map: map
        });
    }
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDkyrsItRXuVawscOhU99GW8n1yvvvDH40&callback=initMap" async defer></script>

{% endblock %}